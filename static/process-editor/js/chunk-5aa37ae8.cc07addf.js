(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5aa37ae8"],{"00ee":function(e,t,s){"use strict";var i=s("b622"),n=i("toStringTag"),a={};a[n]="z",e.exports="[object z]"===String(a)},"0cb2":function(e,t,s){"use strict";var i=s("e330"),n=s("7b0b"),a=Math.floor,r=i("".charAt),l=i("".replace),c=i("".slice),o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,s,i,h,p){var u=s+e.length,g=i.length,f=d;return void 0!==h&&(h=n(h),f=o),l(p,f,(function(n,l){var o;switch(r(l,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,s);case"'":return c(t,u);case"<":o=h[c(l,1,-1)];break;default:var d=+l;if(0===d)return n;if(d>g){var p=a(d/10);return 0===p?n:p<=g?void 0===i[p-1]?r(l,1):i[p-1]+r(l,1):n}o=i[d-1]}return void 0===o?"":o}))}},"21c7":function(e,t,s){"use strict";s("3d6c")},"24fd":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return r}));var i=s("0c6d");function n({deptId:e,type:t}){const s={parentId:{}};return e?s.parentId["eq"]=e:s.parentId["empty"]="true",Object(i["a"])({url:"/cloud/app/app-org",method:"get",params:{filter:JSON.stringify(s)}})}function a({orgIds:e,roleIds:t,name:s}){const n={orgs:{id:{in:e||""}},roles:{id:{in:t||""}},name:{like:s||""}};return e&&(n["orgs"]={id:{in:e}}),t&&(n["roles"]={id:{in:t}}),s&&(n["name"]={like:s}),Object(i["a"])({url:"/cloud/app/app-user",method:"get",params:{filter:JSON.stringify(n)}})}function r(e){return Object(i["a"])({url:"/cloud/app/app-role",method:"get",params:e})}},"3b3b":function(e,t,s){"use strict";s("ff58")},"3d6c":function(e,t,s){},"44e7":function(e,t,s){"use strict";var i=s("861d"),n=s("c6b6"),a=s("b622"),r=a("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"===n(e))}},"577e":function(e,t,s){"use strict";var i=s("f5df"),n=String;e.exports=function(e){if("Symbol"===i(e))throw new TypeError("Cannot convert a Symbol value to a string");return n(e)}},"5b81":function(e,t,s){"use strict";var i=s("23e7"),n=s("c65b"),a=s("e330"),r=s("1d80"),l=s("1626"),c=s("7234"),o=s("44e7"),d=s("577e"),h=s("dc4a"),p=s("90d8"),u=s("0cb2"),g=s("b622"),f=s("c430"),v=g("replace"),m=TypeError,b=a("".indexOf),k=a("".replace),y=a("".slice),S=Math.max;i({target:"String",proto:!0},{replaceAll:function(e,t){var s,i,a,g,w,C,x,_,I,O,U=r(this),A=0,L="";if(!c(e)){if(s=o(e),s&&(i=d(r(p(e))),!~b(i,"g")))throw new m("`.replaceAll` does not allow non-global regexes");if(a=h(e,v),a)return n(a,e,U,t);if(f&&s)return k(d(U),e,t)}g=d(U),w=d(e),C=l(t),C||(t=d(t)),x=w.length,_=S(1,x),I=b(g,w);while(-1!==I)O=C?d(t(w,I,g)):u(w,g,I,[],void 0,t),L+=y(g,A,I)+O,A=I+x,I=I+_>g.length?-1:b(g,w,I+_);return A<g.length&&(L+=y(g,A)),L}})},"709c":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("w-dialog",{attrs:{border:!1,closeFree:"",width:"800px",title:e.title},on:{ok:e.selectOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",{staticClass:"picker"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"candidate"},[t("div",[t("ellipsis",{staticStyle:{height:"18px",color:"#8c8c8c",padding:"7px 0"},attrs:{hoverTip:"",row:1,content:e.deptStackStr}},[t("i",{staticClass:"el-icon-office-building",attrs:{slot:"pre"},slot:"pre"})]),t("div",[t("el-checkbox",{attrs:{disabled:!e.multiple},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.deptStack.length>0,expression:"deptStack.length > 0"}],staticClass:"top-dept",on:{click:e.beforeNode}},[e._v("上一级")])],1)],1),t("div",{staticClass:"org-items"},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:0===e.orgs.length,expression:"orgs.length === 0"}],attrs:{"image-size":100,description:"似乎没有数据"}}),e._l(e.orgs,(function(s,i){return t("div",{key:i,class:e.orgItemClass(s),on:{click:function(t){return e.selectChange(s,"dept")}}},[t("el-checkbox",{attrs:{value:s.selected,disabled:e.disableDept(s)}}),t("div",{staticStyle:{display:"flex","align-items":"center",flex:"1"}},[t("i",{staticClass:"el-icon-folder-opened"}),t("span",{staticClass:"name"},[e._v(e._s(s.name))]),t("span",{class:"next-dept"+(s.selected?"-disable":""),on:{click:function(t){return t.stopPropagation(),e.nextNode(s)}}},[t("i",{staticClass:"iconfont icon-map-site"}),e._v("下级 ")])])],1)}))],2)]),t("div",{staticClass:"users"},[t("div",{staticClass:"search-wrapper"},[t("el-input",{staticClass:"search-input",attrs:{size:"small",clearable:"",placeholder:"搜索人员，姓名模糊搜索","prefix-icon":"el-icon-search"},on:{input:e.searchUser},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("div",{staticClass:"org-items"},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:0===e.searchUserList.length,expression:"searchUserList.length === 0"}],attrs:{"image-size":100,description:"似乎没有数据"}}),e._l(e.searchUserList,(function(s,i){return t("div",{key:i,class:e.orgItemClass(s),on:{click:function(t){return e.selectChange(s,"user")}}},[t("el-checkbox",{attrs:{value:s.selected,disabled:e.disableDept(s)}}),t("div",{staticStyle:{display:"flex","align-items":"center"}},[e.$isNotEmpty(s.avatar)?t("el-avatar",{attrs:{size:35,src:s.avatar}}):e._e(),t("span",{staticClass:"name"},[e._v(e._s(s.name||s.login))])],1)],1)}))],2)]),t("div",{staticClass:"selected"},[t("div",{staticClass:"count"},[t("span",[e._v("已选 "+e._s(e.select.length)+" 项")]),t("span",{on:{click:e.clearSelected}},[e._v("清空")])]),t("div",{staticClass:"org-items",staticStyle:{height:"350px"}},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:0===e.select.length,expression:"select.length === 0"}],attrs:{"image-size":100,description:"请点击左侧列表选择数据"}}),e._l(e.select,(function(s,i){return t("div",{key:i,class:e.orgItemClass(s)},["dept"===s.type?t("div",[t("i",{staticClass:"el-icon-folder-opened"}),t("span",{staticClass:"name",staticStyle:{position:"static"}},[e._v(e._s(s.name))])]):"user"===s.type?t("div",{staticStyle:{display:"flex","align-items":"center"}},[e.$isNotEmpty(s.avatar)?t("el-avatar",{attrs:{size:35,src:s.avatar}}):t("span",{staticClass:"avatar"},[e._v(e._s(e.getShortName(s.name)))]),t("span",{staticClass:"name"},[e._v(e._s(s.name||s.login))])],1):t("div",[t("i",{staticClass:"iconfont icon-bumen"}),t("span",{staticClass:"name"},[e._v(e._s(s.name))])]),t("i",{staticClass:"el-icon-close",on:{click:function(t){return e.noSelected(i)}}})])}))],2)])])])},n=[],a=(s("14d9"),s("5b81"),s("24fd")),r={name:"OrgPicker",components:{},props:{title:{default:"请选择",type:String},type:{default:"org",type:String},multiple:{default:!1,type:Boolean},selected:{default:()=>[],type:Array}},data(){return{visible:!1,loading:!1,checkAll:!1,nowDeptId:null,isIndeterminate:!1,searchUserList:[],nodes:[],select:[],search:"",deptStack:[]}},computed:{deptStackStr(){return String(this.deptStack.map(e=>e.name)).replaceAll(","," > ")},orgs(){return this.nodes}},methods:{show(){this.visible=!0,this.init(),this.getOrgList()},orgItemClass(e){return{"org-item":!0,"org-dept-item":"dept"===e.type,"org-user-item":"user"===e.type}},disableDept(e){return"user"===this.type&&"dept"===e.type},getOrgList(){this.loading=!0,Object(a["a"])({deptId:this.nowDeptId,type:this.type}).then(e=>(this.loading=!1,this.nodes=e.data,Object(a["c"])({orgIds:this.nowDeptId}))).then(e=>{this.searchUserList=e.data,this.selectToLeft()}).catch(e=>{this.loading=!1,this.$message.error(e.response.data)})},getShortName(e){return e?e.length>2?e.substring(1,3):e:"**"},searchUser(){let e=this.search.trim();this.searchUserList=[],this.loading=!0,Object(a["c"])({name:e}).then(e=>{this.loading=!1,this.searchUserList=e.data.map(e=>(e.userId=e.id,e.id=e.login,e)),this.selectToLeft()}).catch(e=>{this.loading=!1,this.$message.error("接口异常")})},selectToLeft(){this.select=Object.assign([],this.selected),this.nodes.forEach(e=>{this.select.filter(e=>"dept"===e.type).map(e=>e.id).includes(e.id)?e.selected=!0:e.selected=!1}),this.searchUserList.forEach(e=>{this.select.filter(e=>"user"===e.type).map(e=>e.id).includes(e.id)?e.selected=!0:e.selected=!1})},selectChange(e,t){if(e.selected){this.checkAll=!1;for(let t=0;t<this.select.length;t++)if(this.select[t].id===e.id){this.select.splice(t,1);break}e.selected=!1}else if(!this.disableDept(e)){e.selected=!0,e.type=t;let s="dept"===t?this.nodes:this.searchUserList;this.multiple||s.forEach(t=>{e.id!==t.id&&(t.selected=!1)}),"dept"===e.type?this.multiple?this.select.unshift(e):this.select=[e]:this.multiple?this.select.push(e):this.select=[e]}},noSelected(e){let t=this.nodes;for(let s=0;s<2;s++){for(let s=0;s<t.length;s++)if(t[s].id===this.select[e].id){t[s].selected=!1,this.checkAll=!1;break}t=this.searchUserList}this.select.splice(e,1)},handleCheckAllChange(){this.nodes.forEach(e=>{if(this.checkAll)e.selected||this.disableDept(e)||(e.selected=!0,this.select.push(e));else{e.selected=!1;for(let t=0;t<this.select.length;t++)if(this.select[t].id===e.id){this.select.splice(t,1);break}}})},nextNode(e){this.nowDeptId=e.id,this.deptStack.push(e),this.getOrgList()},beforeNode(){0!==this.deptStack.length&&(this.deptStack.length<2?this.nowDeptId=null:this.nowDeptId=this.deptStack[this.deptStack.length-2].id,this.deptStack.splice(this.deptStack.length-1,1),this.getOrgList())},recover(){this.select=[],this.nodes.forEach(e=>e.selected=!1)},selectOk(){this.$emit("ok",Object.assign([],this.select.map(e=>({id:e.id,name:e.name||e.login,type:e.type,code:"dept"===e.type?e.code:null,login:"user"===e.type?e.login:null})))),this.visible=!1,this.recover()},clearSelected(){this.$confirm("您确定要清空已选中的项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.recover()})},close(){this.$emit("close"),this.recover()},init(){this.checkAll=!1,this.nowDeptId=null,this.deptStack=[],this.nodes=[],this.selectToLeft()}}},l=r,c=(s("21c7"),s("2877")),o=Object(c["a"])(l,i,n,!1,null,"256ffd70",null);t["a"]=o.exports},"90d8":function(e,t,s){"use strict";var i=s("c65b"),n=s("1a2d"),a=s("3a9b"),r=s("ad6d"),l=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in l||n(e,"flags")||!a(l,e)?t:i(r,e)}},ad6d:function(e,t,s){"use strict";var i=s("825a");e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},d504:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"text-align":"center"}},[t("h4",[e._v("先选择本次登录人员的身份，再进入相应的系统 😅")]),t("div",{staticClass:"work-panel"},[t("div",{staticClass:"user"},[t("el-button",{attrs:{type:"primary",round:"",size:"small",icon:"el-icon-user"},on:{click:function(t){return e.$refs.orgPicker.show()}}},[e._v("选择本次登录者")]),""!==e.loginUser&&null!==e.loginUser?t("div",[t("span",[e._v(e._s(e.loginUser.name))])]):e._e()],1),t("div",{staticClass:"panel"},[t("div",{staticClass:"panel-item",on:{click:function(t){return e.to("/workSpace")}}},[e._m(0),t("p",[e._v(" 您可以发起、处理及查看审批，进行日常工作任务 ")])]),t("div",{staticClass:"panel-item",on:{click:function(t){return e.to("/formsPanel")}}},[e._m(1),t("p",[e._v(" 审批工作流创建 、编辑及其他设置操作，均可以在后台进行 ")])])])]),t("org-picker",{ref:"orgPicker",attrs:{type:"user",selected:e.select},on:{ok:e.selected}})],1)},n=[function(){var e=this,t=e._self._c;return t("div",[t("i",{staticClass:"el-icon-s-platform"}),t("span",[e._v("进入工作区")])])},function(){var e=this,t=e._self._c;return t("div",[t("i",{staticClass:"el-icon-s-custom"}),t("span",[e._v("进入管理后台")])])}],a=(s("14d9"),s("709c")),r={name:"Index",components:{OrgPicker:a["a"]},data(){return{select:[],loginUser:""}},mounted(){let e=sessionStorage.getItem("user");null!==e&&""!==e&&(this.loginUser=JSON.parse(e),this.select.push(this.loginUser))},methods:{selected(e){this.select=e,this.loginUser=e.length>0?e[0]:"",this.showUserSelect=!1,sessionStorage.setItem("user",JSON.stringify(this.loginUser))},to(e){null===this.loginUser||""===this.loginUser?this.$message.warning("请先选择一个人员身份进行登录"):this.$router.push(e)}}},l=r,c=(s("3b3b"),s("2877")),o=Object(c["a"])(l,i,n,!1,null,"398dfb57",null);t["default"]=o.exports},f5df:function(e,t,s){"use strict";var i=s("00ee"),n=s("1626"),a=s("c6b6"),r=s("b622"),l=r("toStringTag"),c=Object,o="Arguments"===a(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(s){}};e.exports=i?a:function(e){var t,s,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(s=d(t=c(e),l))?s:o?a(t):"Object"===(i=a(t))&&n(t.callee)?"Arguments":i}},ff58:function(e,t,s){}}]);
//# sourceMappingURL=chunk-5aa37ae8.cc07addf.js.map